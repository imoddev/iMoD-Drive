<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>iMoD Drive ‚Ä¢ ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏à‡∏î‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡πÑ‡∏ó‡∏¢</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="container">
      <div class="brand">
        <div class="brand__title">iMoD Drive</div>
        <div class="brand__subtitle">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏à‡∏î‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡πÑ‡∏ó‡∏¢ (Supabase)</div>
      </div>
      <nav class="tabs" aria-label="‡πÄ‡∏°‡∏ô‡∏π">
        <button class="tab tab--active" data-tab="overview">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ï‡∏•‡∏≤‡∏î</button>
        <button class="tab" data-tab="explore">‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        <button class="tab" data-tab="evspec">üöó ‡∏™‡πÄ‡∏õ‡∏Ñ‡∏£‡∏ñ EV</button>
        <button class="tab" data-tab="upload">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î</button>
        <button class="tab" data-tab="about">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö</button>
      </nav>
    </header>

    <main class="container">
      <section id="status" class="card status">
        <div class="status__title">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</div>
        <div id="statusText" class="status__text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Supabase‚Ä¶</div>
      </section>

      <section id="overview" class="tabpane tabpane--active" aria-label="‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ï‡∏•‡∏≤‡∏î">
        <div class="grid grid--2">
          <div class="card">
            <div class="card__header">
              <div>
                <div class="card__title">‡∏¢‡∏≠‡∏î‡∏à‡∏î‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                <div class="card__subtitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏µ ‡∏û.‡∏®. ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå</div>
              </div>
              <div class="controls">
                <div id="yearTotalLabel" class="pill">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ: ‚Äî</div>
              </div>
              <div class="controls">
                <label class="label">
                  ‡∏õ‡∏µ ‡∏û.‡∏®.
                  <select id="yearSelect" class="select"></select>
                </label>
              </div>
            </div>
            <div class="card__body">
              <canvas id="monthlyTotalsChart" height="120"></canvas>
              <div id="monthlyTotalsEmpty" class="empty hidden">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏µ‡∏ô‡∏µ‡πâ</div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <div>
                <div class="card__title">‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)</div>
                <div id="latestMonthLabel" class="card__subtitle">‚Äî</div>
              </div>
            </div>
            <div class="card__body">
              <canvas id="vehicleTypeShareChart" height="120"></canvas>
              <div id="vehicleTypeEmpty" class="empty hidden">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
            </div>
          </div>
        </div>

        <div class="grid grid--2">
          <div class="card">
            <div class="card__header">
              <div>
                <div class="card__title">Top ‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå</div>
                <div class="card__subtitle">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ (‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤)</div>
              </div>
            </div>
            <div class="card__body">
              <table class="table" id="topBrandsTable">
                <thead>
                  <tr>
                    <th>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</th>
                    <th>‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠</th>
                    <th class="num">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
              <div id="topBrandsEmpty" class="empty hidden">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <div>
                <div class="card__title">Top ‡∏£‡∏∏‡πà‡∏ô</div>
                <div class="card__subtitle">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ (‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤)</div>
              </div>
            </div>
            <div class="card__body">
              <table class="table" id="topModelsTable">
                <thead>
                  <tr>
                    <th>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</th>
                    <th>‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠</th>
                    <th>‡∏£‡∏∏‡πà‡∏ô</th>
                    <th class="num">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
              <div id="topModelsEmpty" class="empty hidden">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
            </div>
          </div>
        </div>
      </section>

      <section id="explore" class="tabpane" aria-label="‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">
        <div class="card">
          <div class="card__header">
            <div>
              <div class="card__title">‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Drilldown)</div>
              <div class="card__subtitle">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏µ/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ/‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠/Powertrain (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ mapping)</div>
            </div>
          </div>
          <div class="card__body">
            <form id="exploreForm" class="form">
              <label class="label">
                ‡∏õ‡∏µ ‡∏û.‡∏®.
                <select id="exploreYear" class="select"></select>
              </label>
              <label class="label">
                ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà = ‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ)
                <input id="exploreMonth" class="input" type="number" min="1" max="12" placeholder="1-12" />
              </label>
              <label class="label">
                ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ (‡∏ï‡∏£‡∏á‡∏ï‡∏±‡∏ß)
                <input id="exploreType" class="input" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏ô‡∏±‡πà‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 7 ‡∏Ñ‡∏ô" />
              </label>
              <label class="label">
                ‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠ (‡∏ï‡∏£‡∏á‡∏ï‡∏±‡∏ß)
                <input id="exploreBrand" class="input" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô BYD" />
              </label>
              <label class="label">
                Powertrain
                <select id="explorePowertrain" class="select">
                  <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                  <option value="EV">EV</option>
                  <option value="PHEV">PHEV</option>
                  <option value="HEV">HEV</option>
                  <option value="ICE">ICE</option>
                  <option value="Unknown">Unknown</option>
                </select>
              </label>
              <button class="button" type="submit">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
            </form>

            <div class="card card--sub">
              <div class="card__header">
                <div class="card__title">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (Top 200)</div>
              </div>
              <div class="card__body">
                <table class="table" id="exploreTable">
                  <thead>
                    <tr>
                      <th>‡∏õ‡∏µ</th>
                      <th>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th>
                      <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ</th>
                      <th>‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠</th>
                      <th>‡∏£‡∏∏‡πà‡∏ô</th>
                      <th>Powertrain</th>
                      <th class="num">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
                <div id="exploreEmpty" class="empty hidden">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á)</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="upload" class="tabpane" aria-label="‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î">
        <div class="grid grid--2">
          <div class="card">
            <div class="card__header">
              <div>
                <div class="card__title">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô</div>
                <div class="card__subtitle">‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏ô Supabase Auth ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå</div>
              </div>
            </div>
            <div class="card__body">
              <div id="authSignedOut" class="stack">
                <div class="callout">
                  ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ 2 ‡∏ß‡∏¥‡∏ò‡∏µ: (1) Email + Password (2) ‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö (OTP/Magic link)
                </div>
                <label class="label">
                  Email
                  <input id="authEmail" class="input" type="email" placeholder="you@domain.com" autocomplete="email" />
                </label>
                <label class="label">
                  Password (‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ)
                  <input
                    id="authPassword"
                    class="input"
                    type="password"
                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                    autocomplete="current-password"
                  />
                </label>
                <div class="row">
                  <button id="btnSignInPassword" class="button" type="button">Sign in</button>
                  <button id="btnSendMagicLink" class="button button--secondary" type="button">Send magic link</button>
                </div>
                <div class="hint">
                  ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏≠‡∏á (signups) ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Supabase Auth ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î policy ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô
                </div>
              </div>

              <div id="authSignedIn" class="stack hidden">
                <div class="callout callout--ok">
                  ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß: <span id="authUserEmail"></span>
                </div>
                <div class="row">
                  <button id="btnSignOut" class="button button--secondary" type="button">Sign out</button>
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <div>
                <div class="card__title">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå CSV</div>
                <div class="card__subtitle">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏Ç‡πâ‡∏≤ Storage: <code>state-data/raw/{year}/{month}/...</code></div>
              </div>
            </div>
            <div class="card__body">
              <div class="stack">
                <label class="label">
                  ‡πÑ‡∏ü‡∏•‡πå CSV
                  <input id="uploadFile" class="input" type="file" accept=".csv,text/csv" />
                </label>
                <div class="row">
                  <label class="label">
                    ‡∏õ‡∏µ ‡∏û.‡∏®.
                    <input id="uploadYear" class="input" type="number" min="2500" max="3000" placeholder="2568" />
                  </label>
                  <label class="label">
                    ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡πÄ‡∏•‡∏Ç)
                    <input id="uploadMonth" class="input" type="number" min="1" max="12" placeholder="1" />
                  </label>
                </div>
                <label class="label">
                  ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ)
                  <input id="uploadFilename" class="input" type="text" placeholder="sttt_car_new_reg_mm_2568_01.csv" />
                </label>
                <label class="label">
                  <span>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>
                  <label class="checkbox">
                    <input id="uploadOverwrite" type="checkbox" />
                    <span>‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏° (overwrite)</span>
                  </label>
                </label>
                <div class="row">
                  <button id="btnUpload" class="button" type="button">Upload to Supabase</button>
                </div>
                <div id="uploadResult" class="callout hidden"></div>
                <div class="hint">
                  ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏∞‡πÑ‡∏°‡πà ‚Äú‡∏ó‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‚Äù ‡∏ñ‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ (‡πÄ‡∏õ‡∏¥‡∏î overwrite ‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
                </div>
                <div class="hint">
                  ‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ parse CSV ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å RPC ‡πÄ‡∏û‡∏∑‡πà‡∏≠ insert ‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏ô Supabase ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <div>
                <div class="card__title">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Storage ‡πÅ‡∏•‡πâ‡∏ß</div>
                <div class="card__subtitle">‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô <code>state-data/raw/...</code> ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏ã‡πâ‡∏≥</div>
              </div>
            </div>
            <div class="card__body">
              <div class="stack">
                <label class="label">
                  Object path ‡πÉ‡∏ô bucket <code>state-data</code>
                  <input
                    id="ingestObjectPath"
                    class="input"
                    type="text"
                    placeholder="raw/2568/04/sttt_car_new_reg_mm_2568_04.csv"
                  />
                </label>
                <div class="row">
                  <button id="btnIngestFromStorage" class="button" type="button">Ingest from Storage</button>
                </div>
                <div class="hint">‡∏ï‡πâ‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô Storage (role authenticated)</div>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card__header">
            <div>
              <div class="card__title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î (Log)</div>
              <div class="card__subtitle">‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô (‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô)</div>
            </div>
            <div class="controls">
              <button id="btnRefreshUploadLogs" class="button button--secondary" type="button">Refresh</button>
            </div>
          </div>
          <div class="card__body">
            <table class="table" id="uploadLogsTable">
              <thead>
                <tr>
                  <th>‡πÄ‡∏ß‡∏•‡∏≤</th>
                  <th>‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</th>
                  <th>Bucket</th>
                  <th>Path</th>
                  <th class="num">‡∏Ç‡∏ô‡∏≤‡∏î</th>
                  <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div id="uploadLogsEmpty" class="empty hidden">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô</div>
          </div>
        </div>

        <div class="card">
          <div class="card__header">
            <div>
              <div class="card__title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Ingestion)</div>
              <div class="card__subtitle">‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Storage ‡πÅ‡∏ï‡πà‡∏Å‡∏£‡∏≤‡∏ü‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ succeeded ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà</div>
            </div>
            <div class="controls">
              <button id="btnRefreshIngestionRuns" class="button button--secondary" type="button">Refresh</button>
            </div>
          </div>
          <div class="card__body">
            <table class="table" id="ingestionRunsTable">
              <thead>
                <tr>
                  <th>‡πÄ‡∏£‡∏¥‡πà‡∏°</th>
                  <th>‡∏à‡∏ö</th>
                  <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                  <th>‡∏õ‡∏µ</th>
                  <th>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th>
                  <th>‡πÑ‡∏ü‡∏•‡πå</th>
                  <th class="num">‡πÅ‡∏ñ‡∏ß</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div id="ingestionRunsEmpty" class="empty hidden">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ingestion run (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ n8n ‡πÉ‡∏´‡πâ ingest ‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î)</div>
          </div>
        </div>
      </section>

      <section id="about" class="tabpane" aria-label="‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö">
        <div class="card">
          <div class="card__header">
            <div class="card__title">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö</div>
          </div>
          <div class="card__body prose">
            <p>
              ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Supabase ‡∏ú‡πà‡∏≤‡∏ô RPC functions ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏´‡∏•‡∏≤‡∏¢‡∏°‡∏¥‡∏ï‡∏¥ ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô,
              ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠/‡∏£‡∏∏‡πà‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            </p>
            <p>
              ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡πÄ‡∏â‡∏û‡∏≤‡∏∞ EV ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô <code>model_profile.powertrain</code> ‡πÅ‡∏•‡∏∞
              <code>brand_profile.origin_country_id</code> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏°‡∏¥‡∏ï‡∏¥ ‚ÄúEV vs non‚ÄëEV‚Äù ‡πÅ‡∏•‡∏∞ ‚Äú‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏´‡∏ô‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ‚Äù
              ‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
            </p>
            <p>
              ‡∏ó‡∏µ‡πà‡∏°‡∏≤/‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå: iMoD Drive ‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå <a href="https://www.ev.iphonemod.net" target="_blank" rel="noreferrer">www.ev.iphonemod.net</a>
            </p>
          </div>
        </div>
      </section>
    </main>

    <footer class="container footer">
      <span>¬© iMoD Drive ‚Ä¢ Data powered by Supabase</span>
    </footer>

    <!-- ‚ïê‚ïê‚ïê EVSPEC TAB ‚ïê‚ïê‚ïê -->
    <section id="evspec" class="tabpane evspec-root" aria-label="‡∏™‡πÄ‡∏õ‡∏Ñ‡∏£‡∏ñ EV">

      <!-- Toolbar -->
      <div class="evs-toolbar">
        <div class="evs-toolbar-left">
          <div class="evs-search-box">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
            <input type="text" id="evs-search" class="evs-search-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πà‡∏ô, ‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå...">
          </div>
          <select class="evs-select" id="evs-sort">
            <option value="default">‡πÄ‡∏£‡∏µ‡∏¢‡∏á: ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</option>
            <option value="price-asc">‡∏£‡∏≤‡∏Ñ‡∏≤ ‚Üë</option>
            <option value="price-desc">‡∏£‡∏≤‡∏Ñ‡∏≤ ‚Üì</option>
            <option value="range-desc">‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ‚Üì</option>
            <option value="hp-desc">‡πÅ‡∏£‡∏á‡∏°‡πâ‡∏≤ ‚Üì</option>
            <option value="accel-asc">0-100 ‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏∏‡∏î</option>
          </select>
        </div>
        <div id="evs-count" class="evs-count">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
      </div>

      <!-- Filters -->
      <div class="evs-filters-bar" id="evs-filters-bar">
        <div class="evs-filter-group">
          <span class="evs-filter-label">‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå</span>
          <div id="evs-brand-chips" class="evs-chips"></div>
        </div>
        <div class="evs-filter-group">
          <span class="evs-filter-label">‡∏ï‡∏±‡∏ß‡∏ñ‡∏±‡∏á</span>
          <div id="evs-body-chips" class="evs-chips"></div>
        </div>
        <div class="evs-filter-group" style="align-items:center;">
          <span class="evs-filter-label">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</span>
          <input type="number" id="evs-pmin" class="evs-price-in" placeholder="‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î">
          <span class="evs-filter-label">‚Äì</span>
          <input type="number" id="evs-pmax" class="evs-price-in" placeholder="‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î">
          <button class="evs-reset-btn" onclick="evsReset()">‚Ü∫ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
        </div>
      </div>

      <!-- Loading -->
      <div id="evs-loading" class="evs-loading">
        <div class="evs-spinner"></div>
        <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å Google Sheets‚Ä¶</span>
      </div>

      <!-- Grid -->
      <div class="evs-grid" id="evs-grid" style="display:none;"></div>

      <!-- Detail (hidden by default) -->
      <div id="evs-detail" style="display:none;">
        <button class="evs-back-btn" onclick="evsShowList()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
        <div id="evs-detail-content"></div>
      </div>

    </section>

    <script type="module" src="./app.js"></script>
    <script src="./evspec.js"></script>
  </body>
</html>
